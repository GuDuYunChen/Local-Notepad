## 目标
- 用 Word 风格的紧凑型下拉面板替换现有表格工具区，仅保留“尺寸选择”入口，并将合并/拆分、对齐、边框样式、背景色、自动调整等功能整合到该面板中。
- 删除其他独立表格操作按钮及相关样式/逻辑，保持交互一致、响应式适配。

## 现状
- 现有工具栏含多项表格按钮（插入、选择模式、行列增删、对齐、边框/背景等）（src/components/Editor/plugins/ToolbarPlugin.jsx）。
- 尺寸选择组件 `TableSizePicker` 已可选 10×10 栅格（ToolbarPlugin.jsx:345–410）。
- 右键菜单、框选与合并/拆分逻辑在 `TableSelectionPlugin` 中实现（TableSelectionPlugin.jsx）。

## 方案与范围
- 新增 `TableMenu`（面板组件）：集“尺寸选择”栅格、功能分组（布局、合并/拆分、对齐、边框/背景、自动调整）的紧凑 UI；操作通过统一事件总线触发。
- 工具栏替换：移除表格组中除“尺寸选择”入口外的所有独立按钮，改为一个 Word 风格下拉触发器。
- 功能整合：
  - 合并/拆分：调用现有 `TableSelectionPlugin` 的实现（复用命令触发）。
  - 对齐：水平对齐沿用 `FORMAT_ELEMENT_COMMAND`；垂直对齐通过 `TableCellNode.setVerticalAlign`。
  - 边框/背景：写入 `TableCellNode.style` 与 `setBackgroundColor`，保证序列化兼容。
  - 自动调整：集成“适应窗口/适应内容”的宽度计算（现逻辑迁移到面板）。
- 样式：新增紧凑型 UI 样式，遵循 Word 设计（栅格高亮、分组菜单、统一间距/尺寸）；响应式适配小屏。
- 删除项：移除工具栏的行列增删、选择模式、单独对齐/边框/背景按钮及其样式钩子；保留右键菜单（上下文敏感，不属于独立按钮）。
- 模块化与扩展：面板内功能分组通过统一接口 `dispatchTableAction(type, payload)`；后续功能可在面板中新增分组与动作，不破坏现有结构。

## 实施步骤
1. 新增 `TableMenu` 组件（替换 `TableSizePicker`）：
   - 顶部 10×10 栅格选择，底部功能分组列表（Word 风格）。
   - 所有动作通过 `window.dispatchEvent(new CustomEvent('tableAction', {detail:{type, payload}}))` 统一派发。
2. 替换工具栏表格组：用一个“插入表格”按钮触发 `TableMenu` 下拉；移除现有表格相关按钮与选择模式入口。
3. 在 `TableSelectionPlugin` 中接入统一事件：
   - 监听 `tableAction`，路由到合并/拆分/对齐/边框/背景/自动调整实现；复用现有逻辑。
   - 保留右键菜单（上下文敏感），不改交互，但不在工具栏重复提供。
4. 更新样式：新增 `table-menu` 面板样式与栅格高亮、分组条目；对齐 Word 的间距、尺寸、阴影与分隔线；补齐响应式规则。
5. 删除与收敛：
   - 清理工具栏中独立按钮及相关事件逻辑。
   - 移除与之相关的样式片段。
6. 兼容性验证：
   - 保持现有尺寸选择功能与数据序列化（Lexical JSON）。
   - 交互一致性与性能校验（<200ms）。

## 测试
- 用例覆盖：
  - 面板渲染与响应式（包含栅格与分组）
  - 尺寸选择插入表格
  - 派发动作：合并/拆分、对齐、边框/背景、自动调整
  - 保证工具栏不再渲染独立按钮（回归测试）

## 文档
- 更新 `docs/table.md`：加入新面板的使用说明、功能分组与快捷键，响应式与兼容性说明。

## 风险与应对
- 大表格性能：继续采用批量 `editor.update` 与节流；必要时限制最小列宽。
- 设计规范对齐：按截图实现紧凑样式，若需像素级细化，留出 CSS 变量以快速校准。
